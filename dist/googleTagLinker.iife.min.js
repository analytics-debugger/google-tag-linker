/*!
* 
*   @analytics-debugger/google-tag-linker 0.0.1
*   https://github.com/analytics-debugger/google-tag-linker
*
*   Copyright (c) David Vallejo (https://www.thyngster.com).
*   This source code is licensed under the MIT license found in the
*   LICENSE file in the root directory of this source tree.
*
*/

var googleTagLinker=function(){"use strict";function e(e){throw new TypeError('"'+e+'" is read-only')}function r(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,i,o,a,s=[],u=!0,c=!1;try{if(o=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;u=!1}else for(;!(u=(n=o.call(t)).done)&&(s.push(n.value),s.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,r)||n(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,r){if(e){if("string"==typeof e)return i(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(e,r):void 0}}function i(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var o=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function a(e){for(var r=("; "+document.cookie).split("; "),t=r.length-1;t>=0;t--){var n=r[t].split("=");if(e instanceof RegExp?e.test(n[0]):e===n[0])return[n[0],n[1]]}return[]}function s(e,r){return[e,window.btoa(r).replace(/=/g,".")].join("*")}function u(e){return window.atob(e.replace(/\./g,"="))}function c(e){var r=window.location.href,t=new RegExp("[?&]"+e+"=([^&#]*)","i").exec(r);return null===t?null:decodeURIComponent(t[1])}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.linkerQueryParameterName,t=e.cookiesNamesList,n=e.checkFingerPrint,i=c(r);if(i){if(n){var o=i.split("*")[1],a=l({cookiesNamesList:t}),s=d(a);if(o!==s)return}for(var f=i.split("*").slice(2),m={},g=0;g<f.length;g+=2){var v=f[g],h=f[g+1];m[v]=u(h)}return m}}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cookiesNamesList,n=[],i=void 0;return t.forEach((function(e){var t,o=r(a(e),2);e=o[0],(t=o[1])&&(/^_ga/.test(e)?t=t.match(/G[A-Z]1\.[0-9]\.(.+)/)[1]:"FPLC"===e&&(i=t),n.push(s(e,t)))})),i&&n.push(s("_fplc",i)),n}function m(e,r,t,n){if(t.href){var i=r=v(e,r,t.href,n);o.test(i)&&(t.href=i)}}function g(e,r,t){if(t&&t.action){var n=(t.method||"").toLowerCase();if("get"===n){for(var i=t.childNodes||[],a=0;a<i.length;a++){var s=i[a];if(s.name===e){s.setAttribute("value",r);break}}if(!found){var u=document.createElement("input");u.setAttribute("type","hidden"),u.setAttribute("name",e),u.setAttribute("value",r),t.appendChild(u)}}else if("post"===n){var c=v(e,r,t.action);o.test(c)&&(t.action=c)}}}function v(r,t,n,i){function o(e){var t=(e=function(e,r){if(e=function(e){return new RegExp("(.*?)(^|&)"+e+"=([^&]*)&?(.*)")}(e).exec(r)){var t=e[2],n=e[4];r=e[1],n&&(r=r+t+n)}return r}(r,e)).charAt(e.length-1);return e&&"&"!==t&&(e+="&"),e+f}i=!!i;var a=/([^?#]+)(\?[^#]*)?(#.*)?/.exec(n);if(!a)return"";var s=a[1],u=a[2]||"",c=a[3]||"",f=r+"="+t;return i?(o(c.substring(1)),e("fragment")):(o(u.substring(1)),e("queryString")),""+s+u+c}function d(){for(var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=[window.navigator.userAgent,(new Date).getTimezoneOffset(),window.navigator.userLanguage||window.navigator.language,Math.floor((new Date).getTime()/60/1e3)-0,r?r.join("*"):""].join("*"),n=[],i=0;i<256;i++){e=i;for(var o=0;o<8;o++)e=1&e?3988292384^e>>>1:e>>>1;n[i]=e}for(var a=-1,s=0;s<t.length;s++)a=a>>>8^n[255&(a^t.charCodeAt(s))];return((-1^a)>>>0).toString(36)}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.cookiesNamesList,t=l({cookiesNamesList:r});return["1",d(t),t.join("*")].join("*")}function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.linkerQueryParameterName,t=e.cookiesNamesList,n=e.checkFingerPrint;return f({linkerQueryParameterName:r,cookiesNamesList:t,checkFingerPrint:n})}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.linkerQueryParameterName,t=e.cookiesNamesList,n=e.entity,i=e.useFragment,o=h({cookiesNamesList:t});if(n.tagName){if("A"===n.tagName)return m(r,o,n,i);if("FORM"===n.tagName)return g(r,o,n)}if("string"==typeof n)return v(r,o,n,i)}var p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"get",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("undefined"==typeof window||void 0===window.document)throw"This should be only run on a browser";var n={gaCookiesPrefix:r.gaCookiesPrefix||void 0,conversionLinkerCookiesPrefix:r.conversionLinkerCookiesPrefix||"_gcl",linkerQueryParameterName:r.linkerQueryParameterName||"_gl",checkFingerPrint:r.checkFingerPrint||!1,useFragment:r.useFragment||!1};switch(r.cookiesNamesList?n.cookiesNamesList=r.cookiesNamesList:n.cookiesNamesList=[n.gaCookiesPrefix+"_ga",new RegExp("^"+n.gaCookiesPrefix+"_ga_[A-Z,0-9]")].concat(t(["_aw","_dc","_gb","_gf","_ha"].map((function(e){return n.conversionLinkerCookiesPrefix+e}))),["FPLC"]),e){case"get":return h({cookiesNamesList:r.cookiesNamesList});case"read":return k({linkerQueryParameterName:r.linkerQueryParameterName,cookiesNamesList:r.cookiesNamesList,checkFingerPrint:r.checkFingerPrint});case"decorate":return y({linkerQueryParameterName:r.linkerQueryParameterName,cookiesNamesList:r.cookiesNamesList,entity:r.entity,useFragment:r.useFragment})}};return p.prototype={},p.answer=42,p}();
